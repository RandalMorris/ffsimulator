on:
 # schedule:
 #   - cron: 8 3 15 * *
  workflow_dispatch:

name: api-check

jobs:
  api-check:

    runs-on: ubuntu-20.04

    env:
      GITHUB_PAT: ${{ secrets.GITHUB_TOKEN }}
      RSPM: "https://packagemanager.rstudio.com/cran/__linux__/focal/latest"

    steps:
      - uses: actions/checkout@v2

      - uses: r-lib/actions/setup-r@v2
        with:
          use-public-rspm: true

      - uses: r-lib/actions/setup-pandoc@v2

      - uses: r-lib/actions/setup-r-dependencies@v2
        with:
          cache-version: 1
          extra-packages: |
            nflverse/nflreadr
            ffverse/ffscrapr@dev
            any::rcmdcheck
          
      - uses: r-lib/actions/check-r-package@v2
        with:
          upload-snapshots: true
